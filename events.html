<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Symposium 2025</title>
  <link rel="shortcut icon" href="rpsit.png">
  <style>
    body {
      font-family: "Poppins", sans-serif;
      background-color: #f0f4fa;
      margin: 0;
      padding: 0;
    }

    h1 {
      text-align: center;
      background: #004aad;
      color: white;
      padding: 20px;
      margin: 0;
      font-size: 26px;
      letter-spacing: 1px;
    }

    .department {
      background: #ffffff;
      margin: 20px auto;
      width: 90%;
      max-width: 900px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      padding: 20px;
    }

    h2 {
      color: #004aad;
      border-left: 5px solid #004aad;
      padding-left: 10px;
      font-size: 20px;
    }

    .event-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 10px;
    }

    /* This is now the button style */
    .event-btn {
      flex: 1 1 calc(50% - 10px);
      text-decoration: none;
      background: #e3f2fd;
      color: #004aad;
      padding: 12px;
      text-align: center;
      border-radius: 8px;
      font-weight: 500;
      transition: 0.3s;
      box-shadow: 0 3px 6px rgba(0,0,0,0.1);
      cursor: pointer;
      border: none;
      font-size: 15px;
    }

    .event-btn:hover {
      background: #004aad;
      color: white;
      transform: translateY(-3px);
    }

    @media (max-width: 600px) {
      .event-btn {
        flex: 1 1 100%;
      }
    }

    /* --- Modal Styles --- */

    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.6);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }

    .modal-content {
      background: #f0f4fa;
      padding: 20px;
      border-radius: 12px;
      width: 90%;
      max-width: 400px;
      position: relative;
      box-shadow: 0 5px 20px rgba(0,0,0,0.3);
    }

    .modal-close {
      position: absolute;
      top: 10px;
      right: 20px;
      font-size: 28px;
      font-weight: bold;
      color: #888;
      cursor: pointer;
    }
    .modal-close:hover {
      color: #333;
    }

    /* Card style for modal content */
    .event-card {
      background: #ffffff;
      border-radius: 12px;
      padding: 20px;
      display: flex;
      flex-direction: column;
    }

    .event-card h2 { /* Venue */
      color: #004aad;
      font-size: 20px;
      margin: 4px 0;
    }

    .event-card h3 { /* Dept/Event & Directions */
      color: #333;
      font-size: 16px;
      font-weight: 600;
      margin: 10px 0 2px 0;
    }

    .event-card h3.direction { /* Direction steps */
      color: #555;
      font-weight: 400;
      font-size: 15px;
      margin: 2px 0 2px 15px;
      position: relative;
    }

    .event-card h3.direction::before {
      content: 'â€¢';
      position: absolute;
      left: -15px;
      color: #004aad;
    }
    
    /* --- MODIFIED: Styles for the new buttons --- */

    /* Generic button style within the card */
    .event-card .btn {
      text-decoration: none;
      padding: 10px 15px;
      text-align: center;
      border-radius: 8px;
      font-weight: 500;
      transition: 0.3s;
      border: none;
      cursor: pointer;
      font-size: 15px;
    }
    
    /* "Next" button (Primary) */
    .event-card .btn.next {
      background: #004aad;
      color: white;
      margin-top: 15px;
    }
    .event-card .btn.next:hover {
      background: #003a8c;
    }

    /* "View Map" button (Secondary) */
    .event-card .btn.map {
      background: #e3f2fd;
      color: #004aad;
      margin-top: 10px;
    }
    .event-card .btn.map:hover {
      background: #cde7fa;
    }
    /* --- End of MODIFIED styles --- */

    img{
        width: 100%;
        height: auto     ;
    }

  </style>
</head>
<body>
    <img src="rpsit.png" alt="">
  <h1>A National level Technical Symposium - Infinite TechFest 2K25</h1>

  <div class="department">
    <h2>CSE</h2>
    <div class="event-buttons">
      <button class="event-btn" data-event-key="cse-paper">Paper Presentation - LH18</button>
      <button class="event-btn" data-event-key="cse-brain">Brain Bytes - LH16</button>
      <button class="event-btn" data-event-key="cse-algo">Algorithm Design - CADD LAB</button>
      <button class="event-btn" data-event-key="cse-code">Code Debugging - CADD LAB</button>
      <button class="event-btn" data-event-key="cse-poster">Poster Presentation - LH17</button>
    </div>
  </div>

  <div class="department">
    <h2>AI & DS</h2>
    <div class="event-buttons">
      <button class="event-btn" data-event-key="aids-idea">Idea Sphere - LH 12</button>
      <button class="event-btn" data-event-key="aids-neuro">Neuro Nexus - Delta Lab</button>
      <button class="event-btn" data-event-key="aids-prompt">Promptopia - Zeta Lab</button>
      <button class="event-btn" data-event-key="aids-dust">Dust2Data - Zeta Lab</button>
      <button class="event-btn" data-event-key="aids-aidea">AIdea - LH 03</button>
    </div>
  </div>

  <div class="department">
    <h2>IT & Cyber Security</h2>
    <div class="event-buttons">
      <button class="event-btn" data-event-key="it-paper">Paper & Poster Presentation - Alpha LAB</button>
      <button class="event-btn" data-event-key="it-code">Code Debugging & Remix with Figma - Beta Lab</button>
      <button class="event-btn" data-event-key="it-expo">Project Expo - LH13</button>
    </div>
  </div>

  <div class="department">
    <h2>EEE</h2>
    <div class="event-buttons">
      <button class="event-btn" data-event-key="eee-paper">Paper Presentation - LH22</button>
      <button class="event-btn" data-event-key="eee-expo">Project Expo - Machines Lab</button>
      <button class="event-btn" data-event-key="eee-design">Circuit Designing - EDC Lab</button>
      <button class="event-btn" data-event-key="eee-debug">Circuit Debugging - EDC Lab</button>
      <button class="event-btn" data-event-key="eee-quiz">Technical Quiz - LH23</button>
      <button class="event-btn" data-event-key="eee-lyrics">Lyrics Coding - LH22</button>
      <button class="event-btn" data-event-key="eee-act">Act it Out - LH22</button>
    </div>
  </div>

  <div class="department">
    <h2>ECE</h2>
    <div class="event-buttons">
      <button class="event-btn" data-event-key="ece-paper">Paper Presentation - LH08, LH09</button>
      <button class="event-btn" data-event-key="ece-expo">Project Expo - LIC Lab</button>
      <button class="event-btn" data-event-key="ece-debug">Circuit Debugging - MPMC LAB</button>
      <button class="event-btn" data-event-key="ece-startup">Startup Pitching - LH10</button>
      <button class="event-btn" data-event-key="ece-rebus">Picture Rebus - Circuits Lab</button>
    </div>
  </div>

  <div class="department">
    <h2>S&H</h2>
    <div class="event-buttons">
      <button class="event-btn" data-event-key="sh-paper">Paper Presentation - LH04</button>
      <button class="event-btn" data-event-key="sh-poster">Poster Presentation - LH01</button>
      <button class="event-btn" data-event-key="sh-master">Master Mind - LH02</button>
      <button class="event-btn" data-event-key="sh-math">Math Puzzles & Logic - LH02</button>
    </div>
  </div>

  <div class="department">
    <h2>MECH</h2>
    <div class="event-buttons">
      <button class="event-btn" data-event-key="mech-cad">CAD Modeling - ALPHA LAB</button>
      <button class="event-btn" data-event-key="mech-paper">Paper Presentation - MECH LH1</button>
      <button class="event-btn" data-event-key="mech-machinist">Mr. Machinist(Engg. Expert) - Manufacturing LAB</button>
      <button class="event-btn" data-event-key="mech-steel">Steel Fest(Welding Challenge) - Manufacturing LAB</button>
      <button class="event-btn" data-event-key="mech-talk">Extrempore(Tech Talk) - MECH LH1</button>
    </div>
  </div>

  <div id="direction-modal" class="modal-overlay" style="display: none;">
    <div class="modal-content">
      <span id="modal-close-btn" class="modal-close">&times;</span>
      <div id="modal-body" class="event-card">
        </div>
    </div>
  </div>

  <script>
    // --- Store all event direction data ---
      const eventDirections = {
      // CSE
      'cse-paper': {
        title: 'CSE - Paper Presentation',
        venue: 'LH 18 (Floor 2)',
        steps: [
          'Turn left, climb up by stairs (F1)',
          'Climb stairs (F2)',
          'Go straight along the corridor',
          'Turn left',
          'Go straight, destination on right'
        ],
        mapLink: 'two.html?venue=LH18&drawPath=true'
      },
      'cse-brain': {
        title: 'CSE - Brain Bytes',
        venue: 'LH 16 (Floor 2)',
        steps: [
          'You are at Saraswati statue',
          'Turn left, climb up by stairs (F1)',
          'Climb stairs (F2)',
          'Go straight along the corridor',
          'Turn left',
          'Go straight, destination on right'
        ],
        mapLink: 'two.html?venue=LH16&drawPath=true'
      },
      'cse-algo': {
        title: 'CSE - Algorithm Design',
        venue: 'CADD LAB (Floor 2)',
        steps: [
          'You are at Saraswati statue',
          'Turn left, climb up by stairs (F1)',
          'Climb stairs (F2)',
          'Turn left',
          'Go straight, destination on left'
        ],
        mapLink: 'two.html?venue=CADD LAB&drawPath=true'
      },
      'cse-code': {
        title: 'CSE - Code Debugging',
        venue: 'CADD LAB (Floor 2)',
        steps: [
          'You are at Saraswati statue',
          'Turn left, climb up by stairs (F1)',
          'Climb stairs (F2)',
          'Turn left',
          'Go straight, destination on left'
        ],
        mapLink: 'two.html?venue=CADD LAB&drawPath=true'
      },
      'cse-poster': {
        title: 'CSE - Poster Presentation',
        venue: 'LH 17 (Floor 2)',
        steps: [
          'You are at Saraswati statue',
          'Turn left, climb up by stairs (F1)',
          'Climb stairs (F2)',
          'Turn right',
          'Go straight along the corridor',
          'Turn left',
          'Go straight, destination on right'
        ],
        mapLink: 'two.html?venue=LH17&drawPath=true'
      },

      // AI & DS
      'aids-idea': {
        title: 'AI&DS - Idea Sphere',
        venue: 'LH 12 (Floor 1)',
        steps: [
          'You are at Saraswati statue',
          'Turn left, climb up by stairs (F1)',
          'Go straight along the corridor',
          'Turn left',
          'Go straight, destination on right'
        ],
        // FIXED: Added &drawPath=true
        mapLink: 'one.html?venue=LH 12&drawPath=true'
      },
      'aids-neuro': {
        title: 'AI&DS - Neuro Nexus',
        venue: 'Delta Lab (Floor 2)',
        steps: [
          'You are at Saraswati statue',
          'Turn left, climb up by stairs (F1)',
          'Climb stairs (F2)',
          'Turn left',
          'Go straight, destination on left'
        ],
        mapLink: 'two.html?venue=Delta Lab&drawPath=true'
      },
      'aids-prompt': {
        title: 'AI&DS - Promptopia',
        venue: 'Zeta Lab (Floor 2)',
        steps: [
          'You are at Saraswati statue',
          'Turn left, climb up by stairs (F1)',
          'Climb stairs (F2)',
          'Turn left',
          'Go straight, destination on left'
        ],
        mapLink: 'two.html?venue=Zeta Lab&drawPath=true'
      },
      'aids-dust': {
        title: 'AI&DS - Dust2Data',
        venue: 'Zeta Lab (Floor 2)',
        steps: [
          'You are at Saraswati statue',
          'Turn left, climb up by stairs (F1)',
          'Climb stairs (F2)',
          'Turn left',
          'Go straight, destination on left'
        ],
        mapLink: 'two.html?venue=Zeta Lab&drawPath=true'
      },
      'aids-aidea': {
        title: 'AI&DS - AIdea',
        venue: 'LH 03 (Ground Floor)',
        steps: [
          'You are at Saraswati statue',
          'Turn right',
          'Go straight, then turn left',
          'Go straight, destination on right'
        ],
        mapLink: 'Ground.html?venue=LH 03&drawPath=true'
      },

      // IT
      'it-paper': {
        title: 'IT - Paper & Poster Presentation',
        venue: 'Alpha LAB (Floor 1)',
        steps: [
          'You are at Saraswati statue',
          'Turn left, climb up by stairs (F1)',
          'Turn left',
          'Go straight, destination on left'
        ],
        // FIXED: Added &drawPath=true
        mapLink: 'one.html?venue=Alpha LAB&drawPath=true'
      },
      'it-code': {
        title: 'IT - Code Debugging & Figma',
        venue: 'Beta Lab (Floor 1)',
        steps: [
          'You are at Saraswati statue',
          'Turn left, climb up by stairs (F1)',
          'Turn left',
          'Go straight, destination on left'
        ],
        // FIXED: Added &drawPath=true
        mapLink: 'one.html?venue=Beta lab&drawPath=true'
      },
      'it-expo': {
        title: 'IT - Project Expo',
        venue: 'LH13 (Floor 1)',
        steps: [
          'You are at Saraswati statue',
          'Turn left, climb up by stairs (F1)',
          'Turn right',
          'Go straight, destination on left'
        ],
        // FIXED: Added &drawPath=true
        mapLink: 'one.html?venue=LH13&drawPath=true'
      },

      // EEE
      'eee-paper': {
        title: 'EEE - Paper Presentation',
        venue: 'LH22 (Floor 3)',
        steps: [
          'You are at Saraswati statue',
          'Turn left, climb up by stairs (F1)',
          'Climb stairs (F2)',
          'Climb stairs (F3)',
          'Go straight along the corridor',
          'Turn left',
          'Go straight, destination on right'
        ],
        mapLink: 'three.html?venue=LH22&drawPath=true'
      },
      'eee-expo': {
        title: 'EEE - Project Expo',
        venue: 'Machines Lab (Ground Floor)',
        steps: [
          'You are at Saraswati statue',
          'Start at Registration Gate',
          'Go through the road to the left',
          'Go straight through the road, destination on left' 
        ],
        mapLink: 'Ground.html?venue=Machines lab&drawPath=falsw'
      },
      'eee-design': {
        title: 'EEE - Circuit Designing',
        venue: 'EDC Lab (Floor 2)',
        steps: [
          'You are at Saraswati statue',
          'Turn left, climb up by stairs (F1)',
          'Climb stairs (F2)',
          'Climb stairs (F3)',
          'Turn left and GO straight',
          'Turn right, Go Straight, destination on right '
        ],
        mapLink: 'three.html?venue=DH1&drawPath=true'
      },
      'eee-debug': {
        title: 'EEE - Circuit Debugging',
        venue: 'EDC Lab (Floor 3)',
        steps: [
          'You are at Saraswati statue',
          'Turn left, climb up by stairs (F1)',
          'Climb stairs (F2)',
          'Climb stairs (F3)',
          'Turn left and GO straight',
          'Turn right, Go Straight, destination on right '
        ],
        mapLink: 'three.html?venue=DH1&drawPath=true'
      },
      'eee-quiz': {
        title: 'EEE - Technical Quiz',
        venue: 'LH23 (Floor 3)',
        steps: [
          'You are at Saraswati statue',
          'Turn left, climb up by stairs (F1)',
          'Climb stairs (F2)',
          'Turn right',
          'Go straight, destination on left'
        ],
        mapLink: 'three.html?venue=LH23&drawPath=true'
      },
      'eee-lyrics': {
        title: 'EEE - Lyrics Coding',
        venue: 'LH22 (Floor 3)',
        steps: [
          'You are at Saraswati statue',
          'Turn left, climb up by stairs (F1)',
          'Climb stairs (F2)',
          'Turn right',
          'Go straight, destination on left'
        ],
        mapLink: 'three.html?venue=LH22&drawPath=true'
      },
      'eee-act': {
        title: 'EEE - Act it Out',
        venue: 'LH22 (Floor 3)',
        steps: [
          'You are at Saraswati statue',
          'Turn left, climb up by stairs (F1)',
          'Climb stairs (F2)',
          'Climb stairs (F3)',
          'Go straight along the corridor',
          'Turn left',
          'Go straight, destination on left'
        ],
        mapLink: 'three.html?venue=LH22&drawPath=true'
      },

      // ECE
      'ece-paper': {
        title: 'ECE - Paper Presentation',
        venue: 'LH08, LH09 (Floor 1)',
        steps: [
          'You are at Saraswati statue',
          'Turn left, climb up by stairs (F1)',
          'Go straight along the corridor',
          'Turn left',
          'Go straight, destinations on right'
        ],
        // FIXED: Added &drawPath=true
        mapLink: 'one.html?venue=LH08&drawPath=true'
      },
      'ece-expo': {
        title: 'ECE - Project Expo',
        venue: 'LIC Lab (Floor 1)',
        steps: [
          'You are at Saraswati statue',
          'Turn left, climb up by stairs (F1)',
          'Turn left',
          'Go straight along the corridor',
          'Turn right',
          'Go straight, destination on left'
        ],
        // FIXED: Added &drawPath=true
        mapLink: 'one.html?venue=LIC lab&drawPath=true'
      },
      'ece-debug': {
        title: 'ECE - Circuit Debugging',
        venue: 'MPMC LAB (Floor 1)',
        steps: [
          'You are at Saraswati statue',
          'Turn left, climb up by stairs (F1)',
          'Turn left',
          'Go straight along the corridor',
          'Turn right',
          'Go straight, destination on left'
        ],
        // FIXED: Added &drawPath=true
        mapLink: 'one.html?venue=MPMC LAB&drawPath=true'
      },
      'ece-startup': {
        title: 'ECE - Startup Pitching',
        venue: 'LH10 (Floor 1)',
        steps: [
          'You are at Saraswati statue',
          'Turn left, climb up by stairs (F1)',
          'Go straight along the corridor',
          'Turn left',
          'Go straight, destinations on right'
        ],
        // FIXED: Added &drawPath=true
        mapLink: 'one.html?venue=LH10&drawPath=true'
      },
      'ece-rebus': {
        title: 'ECE - Picture Rebus',
        venue: 'Circuits Lab (Floor 1)',
        steps: [
          'You are at Saraswati statue',
          'Turn left, climb up by stairs (F1)',
          'Turn left',
          'Go straight along the corridor',
          'Turn right',
          'Go straight, destination on left'
        ],
        // FIXED: Added &drawPath=true
        mapLink: 'one.html?venue=circuits lab&drawPath=true'
      },

      // S&H
      'sh-paper': {
        title: 'S&H - Paper Presentation',
        venue: 'LH04 (Ground Floor)',
        steps: [
          'You are at Saraswati statue',
          'Turn right',
          'Go straight, then turn left',
          'Go straight, destination on right'
        ],
        mapLink: 'Ground.html?venue=LH04&drawPath=true'
      },
      'sh-poster': {
        title: 'S&H - Poster Presentation',
        venue: 'LH01 (Ground Floor)',
        steps: [
          'You are at Saraswati statue',
          'Turn right',
          'Go straight, then turn left',
          'Go straight, destination on right'
        ],
        mapLink: 'Ground.html?venue=LH01&drawPath=true'
      },
      'sh-master': {
        title: 'S&H - Master Mind',
        venue: 'LH02 (Ground Floor)',
        steps: [
          'You are at Saraswati statue',
          'Turn right',
          'Go straight, then turn left',
          'Go straight, destination on right'
        ],
        mapLink: 'Ground.html?venue=LH02&drawPath=true'
      },
      'sh-math': {
        title: 'S&H - Math Puzzles & Logic',
        venue: 'LH02 (Ground Floor)',
        steps: [
          'You are at Saraswati statue',
          'Turn right',
          'Go straight, then turn left',
          'Go straight, destination on right'
        ],
        mapLink: 'Ground.html?venue=LH02&drawPath=true'
      },

      // MECH
      'mech-cad': {
        title: 'MECH - CAD Modeling',
        venue: 'ALPHA LAB (Floor 1)',
        steps: [
          'You are at Saraswati statue',
          'Turn left, climb up by stairs (F1)',
          'Turn left',
          'Go straight, destination on left'
        ],
        // FIXED: Added &drawPath=true
        mapLink: 'one.html?venue=ALPHA LAB&drawPath=true'
      },
      'mech-paper': {
        title: 'MECH - Paper Presentation',
        venue: 'MECH LH1 (Mech labs)',
        steps: [
          'Start at Registration Gate',
          'Go straight through road, Turn right',
          'Go straight, destination on right'
        ],
        mapLink: 'Ground.html?venue=MEL&drawPath=false'
      },
      'mech-machinist': {
        title: 'MECH - Mr. Machinist',
        venue: 'Manufacturing LAB (Mech labs)',
        steps: [
          'Start at Registration Gate',
          'Go straight through road, Turn right',
          'Go straight, destination on right'
        ],
        mapLink: 'Ground.html?venue=MEL&drawPath=false'
      },
      'mech-steel': {
        title: 'MECH - Steel Fest',
        venue: 'Manufacturing LAB (Mech labs)',
        steps: [
          'Start at Registration Gate',
          'Go straight through road, Turn right',
          'Go straight, destination on right'
        ],
        mapLink: 'Ground.html?venue=MEL&drawPath=false'
      },
      'mech-talk': {
        title: 'MECH - Extrempore (Tech Talk)',
        venue: 'MECH LH1',
        steps: [
          'Start at Registration Gate',
          'Go straight through road, Turn right',
          'Go straight, destination on right'
        ],
        mapLink: 'Ground.html?venue=MEL&drawPath=false'
      }
    };

    // --- Modal Logic (Step-by-step Audio) ---
    const modal = document.getElementById('direction-modal');
    const modalBody = document.getElementById('modal-body');
    const closeModalBtn = document.getElementById('modal-close-btn');

    // --- Global state for step-by-step ---
    let currentEventData = null;
    let currentStepIndex = 0; // This will track the *next* step to be spoken

    // Speak function
    function speakDirections(text) {
      if ('speechSynthesis' in window) {
        window.speechSynthesis.cancel(); // Stop any previous speech
        // Clean up text like (F1) to "floor 1" for better speech
        const cleanText = text.replace(/\(F(\d)\)/g, ', floor $1');
        const utterance = new SpeechSynthesisUtterance(cleanText);
        utterance.lang = 'en-US'; // Using en-US for broader compatibility
        utterance.rate = 0.9; 
        window.speechSynthesis.speak(utterance);
      } else {
        console.warn('Speech Synthesis not supported in this browser.');
      }
    }

    // --- Function to handle audio navigation step-by-step ---
    function handleAudioStep() {
      const data = currentEventData;
      const btn = document.getElementById('audioNavBtn');
      if (!data || !btn) return;

      if (currentStepIndex < data.steps.length) {
        // --- We are speaking a step ---
        const stepToSpeak = data.steps[currentStepIndex];
        let text = stepToSpeak;

        if (currentStepIndex === 0) {
          // Give context on the first click
          text = `${data.title}. ${data.venue}. First step: ${stepToSpeak}`;
        }
        
        speakDirections(text);

        // Update button for the *next* step
        currentStepIndex++;

        if (currentStepIndex < data.steps.length) {
          btn.innerText = `Reached? (Next Step ${currentStepIndex + 1})`;
        } else {
          // We just spoke the last step
          // Add a slight delay before saying "You have arrived"
          setTimeout(() => {
             speakDirections("You have arrived!");
          }, 1000); // 1-second delay
          btn.innerText = "Done";
        }

      } else {
        // --- This means the button says "Done" and was clicked ---
        closeModal();
      }
    }

    // --- openModal now shows ALL steps ---
    function openModal(eventKey) {
      const data = eventDirections[eventKey];
      if (!data) return;

      // Set global state
      currentEventData = data;
      currentStepIndex = 0; // Reset to 0 (for the "Start" button)

      // Build direction steps HTML (Show all steps)
      let stepsHtml = '';
      data.steps.forEach(step => {
        stepsHtml += `<h3 class="direction">${step}</h3>`;
      });

      // Populate modal
      modalBody.innerHTML = `
        <h3>${data.title}</h3>
        <h2>${data.venue}</h2>
        ${stepsHtml}
        <button id="audioNavBtn" class="btn next">Start Audio Navigation</button>
        <a href="${data.mapLink}" target="_blank" class="btn map">View Map</a>
      `;

      // Show modal
      modal.style.display = 'flex';
    }

    // --- closeModal resets state and stops speech ---
    function closeModal() {
      modal.style.display = 'none';
      if ('speechSynthesis' in window) {
        window.speechSynthesis.cancel(); // Stop speech on close
      }
      // Reset state
      currentEventData = null;
      currentStepIndex = 0;
    }

    // Add click listeners to all event buttons
    document.querySelectorAll('.event-btn').forEach(btn => {
      btn.addEventListener('click', (e) => {
        const key = e.target.dataset.eventKey;
        openModal(key);
      });
    });

    // --- Event delegation for the "audioNavBtn" ---
    modalBody.addEventListener('click', (e) => {
      // Check if the clicked element is our audio button
      if (e.target.id === 'audioNavBtn') {
        handleAudioStep();
      }
    });

    // Add close listeners
    closeModalBtn.addEventListener('click', closeModal);
    modal.addEventListener('click', (e) => {
      // Close if user clicks on the dark overlay
      if (e.target === modal) {
        closeModal();
      }
    });

  </script>
</body>
</html>